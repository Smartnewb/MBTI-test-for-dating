"use strict";(()=>{var e={};e.id=61,e.ids=[61],e.modules={"next/dist/compiled/next-server/app-page.runtime.prod.js":e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},"next/dist/compiled/next-server/app-route.runtime.prod.js":e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},buffer:e=>{e.exports=require("buffer")},crypto:e=>{e.exports=require("crypto")},events:e=>{e.exports=require("events")},http:e=>{e.exports=require("http")},https:e=>{e.exports=require("https")},net:e=>{e.exports=require("net")},punycode:e=>{e.exports=require("punycode")},stream:e=>{e.exports=require("stream")},tls:e=>{e.exports=require("tls")},url:e=>{e.exports=require("url")},zlib:e=>{e.exports=require("zlib")},"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?page=%2Fapi%2Fsession%2Fdata%2Froute&name=app%2Fapi%2Fsession%2Fdata%2Froute&pagePath=private-next-app-dir%2Fapi%2Fsession%2Fdata%2Froute.js&appDir=%2FUsers%2Fsmartnewbie%2FDesktop%2FMBTI-test-for-dating%2Fsrc%2Fapp&appPaths=%2Fapi%2Fsession%2Fdata%2Froute&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&basePath=&assetPrefix=&nextConfigOutput=standalone&nextConfigExperimentalUseEarlyImport=false&preferredRegion=&middlewareConfig=e30%3D!":(e,s,t)=>{t.r(s),t.d(s,{originalPathname:()=>f,patchFetch:()=>g,requestAsyncStorage:()=>x,routeModule:()=>c,serverHooks:()=>F,staticGenerationAsyncStorage:()=>m});var r={};t.r(r),t.d(r,{DELETE:()=>l,GET:()=>d,PUT:()=>u});var o=t("(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js"),a=t("(rsc)/./node_modules/next/dist/server/future/route-kind.js"),n=t("(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js"),i=t("(rsc)/./node_modules/next/dist/api/server.js"),p=t("(rsc)/./src/app/utils/supabase.js");async function d(e){try{let s=e.headers.get("x-session-id");if(!s)return i.NextResponse.json({error:"세션 ID가 없습니다."},{status:400});let{data:t,error:r}=await p.OQ.from("sessions").select("data").eq("id",s).single();if(r&&"PGRST116"!==r.code)return console.error("Error fetching session data:",r),i.NextResponse.json({error:"세션 데이터를 가져오는 중 오류가 발생했습니다."},{status:500});if(!t)return i.NextResponse.json({data:{}});return i.NextResponse.json({data:t.data||{}})}catch(e){return console.error("Session data fetch error:",e),i.NextResponse.json({error:"세션 데이터를 가져오는 중 오류가 발생했습니다."},{status:500})}}async function u(e){try{let s=e.headers.get("x-session-id");if(!s)return i.NextResponse.json({error:"세션 ID가 없습니다."},{status:400});let t=await e.json();if(!t.data)return i.NextResponse.json({error:"업데이트할 데이터가 없습니다."},{status:400});let{data:r,error:o}=await p.OQ.from("sessions").select("data").eq("id",s).single();if(o&&"PGRST116"!==o.code)return console.error("Error fetching current session data:",o),i.NextResponse.json({error:"현재 세션 데이터를 가져오는 중 오류가 발생했습니다."},{status:500});let a={...r?.data||{},...t.data},{error:n}=await p.OQ.from("sessions").upsert([{id:s,last_active:new Date().toISOString(),data:a}],{onConflict:"id"});if(n)return console.error("Error updating session data:",n),i.NextResponse.json({error:"세션 데이터를 업데이트하는 중 오류가 발생했습니다."},{status:500});return i.NextResponse.json({success:!0,data:a})}catch(e){return console.error("Session data update error:",e),i.NextResponse.json({error:"세션 데이터를 업데이트하는 중 오류가 발생했습니다."},{status:500})}}async function l(e){try{let s=e.headers.get("x-session-id");if(!s)return i.NextResponse.json({error:"세션 ID가 없습니다."},{status:400});let{error:t}=await p.OQ.from("sessions").delete().eq("id",s);if(t)return console.error("Error deleting session data:",t),i.NextResponse.json({error:"세션 데이터를 삭제하는 중 오류가 발생했습니다."},{status:500});return i.NextResponse.json({success:!0})}catch(e){return console.error("Session data delete error:",e),i.NextResponse.json({error:"세션 데이터를 삭제하는 중 오류가 발생했습니다."},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/session/data/route",pathname:"/api/session/data",filename:"route",bundlePath:"app/api/session/data/route"},resolvedPagePath:"/Users/smartnewbie/Desktop/MBTI-test-for-dating/src/app/api/session/data/route.js",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:x,staticGenerationAsyncStorage:m,serverHooks:F}=c,f="/api/session/data/route";function g(){return(0,n.patchFetch)({serverHooks:F,staticGenerationAsyncStorage:m})}},"(rsc)/./src/app/utils/supabase.js":(e,s,t)=>{t.d(s,{OQ:()=>n});var r=t("(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js");let o="https://uboblerxqhlkwesjmvbo.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVib2JsZXJ4cWhsa3dlc2ptdmJvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc0ODU2MTUsImV4cCI6MjA2MzA2MTYxNX0.UoMDiFnu_vEaxMsVxAOQAj8tnVQ4-c0fbkx6HW_hfww";o&&a||console.error("Supabase URL or Anonymous Key is missing. Please check your environment variables.");let n=(0,r.eI)(o,a)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,135],()=>t("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?page=%2Fapi%2Fsession%2Fdata%2Froute&name=app%2Fapi%2Fsession%2Fdata%2Froute&pagePath=private-next-app-dir%2Fapi%2Fsession%2Fdata%2Froute.js&appDir=%2FUsers%2Fsmartnewbie%2FDesktop%2FMBTI-test-for-dating%2Fsrc%2Fapp&appPaths=%2Fapi%2Fsession%2Fdata%2Froute&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&basePath=&assetPrefix=&nextConfigOutput=standalone&nextConfigExperimentalUseEarlyImport=false&preferredRegion=&middlewareConfig=e30%3D!"));module.exports=r})();